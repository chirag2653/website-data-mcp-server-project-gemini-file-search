(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3985:(e,s,r)=>{"use strict";r.d(s,{IngestionForm:()=>x});var t=r(5636),a=r(8408),l=r(4773);let n=(0,l.createServerReference)("40e068f070ee0c87ce95f28eee71a4e4ab2ad0f669",l.callServer,void 0,l.findSourceMapURL,"getIngestionProgress"),i=(0,l.createServerReference)("40622ed279d917b6463604c69302242b45356ef24b",l.callServer,void 0,l.findSourceMapURL,"checkWebsite"),d=(0,l.createServerReference)("60d306fda615a5dc15be3c0235749ca6d4859c5b62",l.callServer,void 0,l.findSourceMapURL,"ingestWebsite"),o=(0,l.createServerReference)("6059c8a6b5b82ffc7a1d5d100ac4868c75861c3a08",l.callServer,void 0,l.findSourceMapURL,"runIndexing");function c(e){var s,r,a,l,n,i,d,o;let{status:c,onIngest:m,onIndexing:x,onReset:u,isPending:h}=e;if("idle"===c.type)return null;if("checking"===c.type)return(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 shadow-sm animate-pulse",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-3 border-blue-200 border-t-blue-600"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-3 border-transparent border-t-blue-400 animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-blue-900 font-semibold text-base",children:"Checking if website exists..."}),(0,t.jsx)("p",{className:"text-blue-600 text-sm mt-0.5",children:"This will only take a moment"})]})]})});if("exists"===c.type)return(0,t.jsx)("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 border-2 border-amber-200 rounded-xl p-6 shadow-lg animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-7 w-7 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-amber-900 mb-3",children:"Website Already Exists"}),(0,t.jsxs)("div",{className:"bg-white/60 rounded-lg p-4 mb-4 space-y-2.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-amber-900",children:"Root Domain:"}),(0,t.jsx)("span",{className:"text-sm text-amber-800 font-mono bg-amber-100 px-2 py-1 rounded",children:c.domain})]}),(0,t.jsx)("p",{className:"text-xs text-amber-700 italic",children:"Resolved to root domain from the URL you provided"}),(null==(s=c.website)?void 0:s.display_name)&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-amber-900",children:"Display Name:"}),(0,t.jsx)("span",{className:"text-sm text-amber-800",children:c.website.display_name})]}),(null==(r=c.website)?void 0:r.id)&&(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-amber-900",children:"Website ID:"}),(0,t.jsx)("code",{className:"text-xs bg-amber-100 text-amber-900 px-2 py-1 rounded font-mono",children:c.website.id})]})]}),(0,t.jsx)("p",{className:"text-sm text-amber-800 mb-5 leading-relaxed",children:"This website has already been processed in the system. You can chat with it or run the sync service to check for changes."}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)("button",{onClick:()=>{alert("Sync service integration coming soon. This will check for changes and update the website.")},className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white py-2.5 px-6 rounded-xl font-semibold hover:from-amber-600 hover:to-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:"Run Sync Service"}),(0,t.jsx)("button",{onClick:u,className:"bg-gray-600 text-white py-2.5 px-6 rounded-xl font-semibold hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:"Check Another Website"})]})]})]})});if("new"===c.type)return(0,t.jsx)("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-xl p-6 shadow-lg animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-7 w-7 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-emerald-900 mb-2",children:"New Website Detected"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("span",{className:"text-sm text-emerald-700",children:"Domain: "}),(0,t.jsx)("span",{className:"text-sm font-mono font-semibold text-emerald-900 bg-emerald-100 px-2 py-1 rounded",children:c.domain})]}),(0,t.jsxs)("div",{className:"bg-white/70 border border-emerald-200 rounded-lg p-4 mb-5",children:[(0,t.jsxs)("p",{className:"text-sm font-semibold text-emerald-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"What will happen:"]}),(0,t.jsxs)("ul",{className:"text-sm text-emerald-800 space-y-2 ml-6 list-disc",children:[(0,t.jsx)("li",{children:"Create a new website record in the system"}),(0,t.jsx)("li",{children:"Discover all URLs on the website"}),(0,t.jsx)("li",{children:"Scrape and store content as markdown"}),(0,t.jsx)("li",{children:"Create records for all discovered pages"})]})]}),(0,t.jsx)("p",{className:"text-sm text-emerald-800 mb-5 leading-relaxed",children:"This is a new website we have detected. Do you want to run the ingestion?"}),(0,t.jsx)("button",{onClick:m,disabled:h,className:"bg-gradient-to-r from-emerald-500 to-green-600 text-white py-3 px-8 rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl disabled:shadow-none transform hover:scale-[1.02] disabled:transform-none",children:h?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Starting Ingestion..."]}):"Run Ingestion"})]})]})});if("ingesting"===c.type){let e=null!=(i=null==(a=c.progress)?void 0:a.percentage)?i:0,s=null!=(d=null==(l=c.progress)?void 0:l.completed)?d:0,r=null!=(o=null==(n=c.progress)?void 0:n.total)?o:0;return(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-3 border-blue-200 border-t-blue-600"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-3 border-transparent border-t-blue-400 animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:"Ingestion in Progress"}),(0,t.jsx)("p",{className:"text-sm text-blue-800 mb-4 leading-relaxed",children:"This may take several minutes. The website is being crawled, scraped, and pages are being stored..."}),r>0&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-blue-700 mb-1",children:[(0,t.jsx)("span",{children:"Scraping pages..."}),(0,t.jsxs)("span",{children:[s," / ",r," (",e,"%)"]})]}),(0,t.jsx)("div",{className:"mt-2 bg-blue-100 rounded-full h-3 overflow-hidden shadow-inner",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full shadow-md transition-all duration-500",style:{width:"".concat(Math.max(5,e),"%")}})})]}),0===r&&(0,t.jsx)("div",{className:"mt-4 bg-blue-100 rounded-full h-3 overflow-hidden shadow-inner",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full animate-pulse shadow-md",style:{width:"30%"}})}),(0,t.jsx)("p",{className:"text-xs text-blue-600 mt-2 italic",children:"Please don't close this page"})]})]})})}return"ingested"===c.type?(0,t.jsx)("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-xl p-6 shadow-lg animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-7 w-7 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-emerald-900 mb-4",children:"Ingestion Completed Successfully! \uD83C\uDF89"}),(0,t.jsxs)("div",{className:"bg-white/70 rounded-lg p-4 mb-5 space-y-2.5",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-emerald-700 uppercase tracking-wide",children:"Website ID"}),(0,t.jsx)("p",{className:"text-sm font-mono text-emerald-900 mt-1 bg-emerald-100 px-2 py-1 rounded",children:c.result.websiteId})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-emerald-700 uppercase tracking-wide",children:"Domain"}),(0,t.jsx)("p",{className:"text-sm text-emerald-900 mt-1 font-semibold",children:c.result.domain})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-emerald-700 uppercase tracking-wide",children:"Pages Discovered"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-emerald-900 mt-1",children:c.result.pagesDiscovered})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-emerald-700 uppercase tracking-wide",children:"Pages Scraped"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-emerald-900 mt-1",children:c.result.pagesIndexed})]})]}),c.result.errors&&c.result.errors.length>0&&(0,t.jsx)("div",{className:"pt-2 border-t border-emerald-200",children:(0,t.jsxs)("p",{className:"text-xs text-amber-700",children:[(0,t.jsx)("strong",{children:"Errors:"})," ",c.result.errors.length]})})]}),(0,t.jsx)("p",{className:"text-sm text-emerald-800 mb-5 leading-relaxed",children:"The website has been ingested and pages have been scraped. Now you can run indexing to upload the content to Gemini File Search."}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[x&&c.result&&c.result.pagesIndexed>0&&(0,t.jsx)("button",{onClick:()=>x(c.websiteId),disabled:h,className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-8 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl disabled:shadow-none transform hover:scale-[1.02] disabled:transform-none",children:h?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Starting Indexing..."]}):"Run Indexing"}),(0,t.jsx)("button",{onClick:u,className:"bg-gray-600 text-white py-3 px-6 rounded-xl font-semibold hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:"Ingest Another Website"})]})]})]})}):"indexing"===c.type?(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-3 border-blue-200 border-t-blue-600"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-3 border-transparent border-t-blue-400 animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:"Indexing in Progress"}),(0,t.jsx)("p",{className:"text-sm text-blue-800 mb-4 leading-relaxed",children:"Uploading scraped content to Gemini File Search. This may take several minutes depending on the number of pages..."}),(0,t.jsx)("div",{className:"mt-4 bg-blue-100 rounded-full h-3 overflow-hidden shadow-inner",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full animate-pulse shadow-md",style:{width:"70%"}})}),(0,t.jsx)("p",{className:"text-xs text-blue-600 mt-2 italic",children:"Please don't close this page"})]})]})}):"indexed"===c.type?(0,t.jsx)("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-xl p-6 shadow-lg animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-7 w-7 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-emerald-900 mb-4",children:"Indexing Completed Successfully! \uD83D\uDE80"}),(0,t.jsxs)("div",{className:"bg-white/70 rounded-lg p-4 mb-5",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-2 mb-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-emerald-700 uppercase tracking-wide",children:"Pages Indexed"}),(0,t.jsx)("span",{className:"text-3xl font-bold text-emerald-900",children:c.result.pagesIndexed})]}),c.result.errors&&c.result.errors.length>0&&(0,t.jsx)("div",{className:"pt-2 border-t border-emerald-200",children:(0,t.jsxs)("p",{className:"text-xs text-amber-700",children:[(0,t.jsx)("strong",{children:"Errors:"})," ",c.result.errors.length]})})]}),(0,t.jsx)("p",{className:"text-sm text-emerald-800 mb-5 leading-relaxed",children:"All pages have been uploaded to Gemini File Search and are now searchable. You can now chat with this website!"}),(0,t.jsx)("button",{onClick:u,className:"bg-gradient-to-r from-emerald-500 to-green-600 text-white py-3 px-8 rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:"Ingest Another Website"})]})]})}):"error"===c.type?(0,t.jsx)("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 border-2 border-red-200 rounded-xl p-6 shadow-lg animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-7 w-7 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-red-900 mb-3",children:"Error Occurred"}),(0,t.jsx)("div",{className:"bg-white/70 rounded-lg p-4 mb-5",children:(0,t.jsx)("p",{className:"text-sm text-red-800 leading-relaxed font-medium",children:c.message})}),(0,t.jsx)("button",{onClick:u,className:"bg-gradient-to-r from-red-500 to-red-600 text-white py-3 px-8 rounded-xl font-semibold hover:from-red-600 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:"Try Again"})]})]})}):null}function m(e){let{url:s,displayName:r,onUrlChange:a,onDisplayNameChange:l,onCheck:n,disabled:i}=e;return(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i||n()},className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"url",className:"block text-sm font-semibold text-gray-700 mb-2.5",children:["Website URL ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),(0,t.jsx)("input",{id:"url",type:"url",value:s,onChange:e=>a(e.target.value),placeholder:"https://example.com",disabled:i,className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all duration-200 text-gray-900 placeholder-gray-400",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"displayName",className:"block text-sm font-semibold text-gray-700 mb-2.5",children:["Display Name ",(0,t.jsx)("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),(0,t.jsx)("input",{id:"displayName",type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"My Website",disabled:i,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all duration-200 text-gray-900 placeholder-gray-400"}),(0,t.jsx)("p",{className:"mt-1.5 text-xs text-gray-500",children:"A friendly name to identify this website"})]}),(0,t.jsx)("button",{type:"submit",disabled:i||!s.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3.5 px-6 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl disabled:shadow-none transform hover:scale-[1.02] disabled:transform-none",children:i?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):"Check Website"})]})}function x(){let[e,s]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[x,u]=(0,a.useState)({type:"idle"}),[h,b]=(0,a.useTransition)(),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{if("ingesting"===x.type&&x.websiteId){let e=async()=>{try{let l=await n(x.websiteId);if(l.success&&l.data){var e,s,r,t,a;let n=l.data;"completed"===n.status?(g.current&&(clearInterval(g.current),g.current=null),u({type:"ingested",result:{websiteId:x.websiteId,pagesDiscovered:null!=(e=n.urlsDiscovered)?e:0,pagesIndexed:null!=(s=n.urlsUpdated)?s:0,errors:null!=(r=n.errors)?r:[]},websiteId:x.websiteId})):"failed"===n.status?(g.current&&(clearInterval(g.current),g.current=null),u({type:"error",message:(null==(a=n.errors)||null==(t=a[0])?void 0:t.error)||"Ingestion failed"})):"running"===n.status&&u({type:"ingesting",websiteId:x.websiteId,jobId:n.jobId,progress:n.progress})}}catch(e){console.error("Error polling ingestion progress:",e)}};e(),g.current=setInterval(e,5e3)}return()=>{g.current&&(clearInterval(g.current),g.current=null)}},[x]);let f=async()=>{if(!e.trim())return void u({type:"error",message:"Please enter a URL"});u({type:"checking"}),b(async()=>{var s,r;let t=await i(e);if(!t.success)return void u({type:"error",message:t.error||"Failed to check website"});(null==(s=t.data)?void 0:s.exists)?u({type:"exists",website:t.data.website,domain:t.data.domain}):u({type:"new",domain:(null==(r=t.data)?void 0:r.domain)||""})})},p=async()=>{if(!e.trim())return void u({type:"error",message:"Please enter a URL"});b(async()=>{let s=await d(e,r||void 0);if(!s.success)return void u({type:"error",message:s.error||"Failed to ingest website"});s.jobId&&s.data?u({type:"ingesting",websiteId:s.data.websiteId,jobId:s.jobId}):s.data?u({type:"ingested",result:s.data,websiteId:s.data.websiteId}):u({type:"error",message:"Unexpected response from ingestion"})})},v=async e=>{u({type:"indexing",websiteId:e}),b(async()=>{let s=await o(e);if(!s.success)return void u({type:"error",message:s.error||"Failed to run indexing"});u({type:"indexed",result:s.data})})};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(m,{url:e,displayName:r,onUrlChange:s,onDisplayNameChange:l,onCheck:f,disabled:h||"checking"===x.type||"ingesting"===x.type||"indexing"===x.type}),(0,t.jsx)(c,{status:x,onIngest:p,onIndexing:v,onReset:()=>{s(""),l(""),u({type:"idle"})},isPending:h})]})}},4773:(e,s,r)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var r in s)Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}(s,{callServer:function(){return t.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return a.findSourceMapURL}});let t=r(4022),a=r(3474),l=r(978)},7750:(e,s,r)=>{Promise.resolve().then(r.bind(r,3985))}},e=>{e.O(0,[64,960,358],()=>e(e.s=7750)),_N_E=e.O()}]);